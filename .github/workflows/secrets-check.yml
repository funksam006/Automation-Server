- name: Validate Required Secrets
  run: |
    missing=0

    if [ -z "${{ secrets.SSH_PRIVATE_KEY }}" ]; then
      echo "‚ùå Missing SSH_PRIVATE_KEY"
      missing=1
    fi
    if [ -z "${{ secrets.REMOTE_HOST }}" ]; then
      echo "‚ùå Missing REMOTE_HOST"
      missing=1
    fi
    if [ -z "${{ secrets.REMOTE_USER }}" ]; then
      echo "‚ùå Missing REMOTE_USER"
      missing=1
    fi
    if [ -z "${{ secrets.PROJECT_PATH }}" ]; then
      echo "‚ùå Missing PROJECT_PATH"
      missing=1
    fi
    if [ -z "${{ secrets.BACKUP_SERVER }}" ]; then
      echo "‚ùå Missing BACKUP_SERVER"
      missing=1
    fi
    if [ -z "${{ secrets.BACKUP_USER }}" ]; then
      echo "‚ùå Missing BACKUP_USER"
      missing=1
    fi
    if [ -z "${{ secrets.BACKUP_PATH }}" ]; then
      echo "‚ùå Missing BACKUP_PATH"
      missing=1
    fi

    if [ "$missing" -eq 1 ]; then
      echo "üö´ One or more required secrets are missing. Failing the workflow."
      exit 1
    fi
